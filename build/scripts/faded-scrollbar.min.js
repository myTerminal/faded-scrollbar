var FadedScrollbar=function(n,o){var e,t,s,i,a,c,r=$(n).first(),d=null,l=null,u=function(){f(),m(),p()},f=function(){w(),h(),b()},h=function(){var n=r.html();e=$("<div class='faded-scrollbar-parent'>  <div class='faded-scrollbar-container'>  </div>  <div class='faded-scrollbar-controls'>    <div class='faded-scrollbar-handle-container'>      <div class='faded-scrollbar-handle'>        <div class='faded-scrollbar-handle-bar'></div>      </div>      <div class='faded-scrollbar-handle-track'></div>    </div>  </div></div>"),r.html(""),r.append(e),e.find(".faded-scrollbar-container").append(n)},b=function(){t=e.find(".faded-scrollbar-container"),s=e.find(".faded-scrollbar-controls"),i=e.find(".faded-scrollbar-handle"),a=e.find(".faded-scrollbar-handle-bar"),c=e.find(".faded-scrollbar-handle-track")},m=function(){t.bind("mousedown",function(n){n.stopPropagation(),d=n.clientY}),t.bind("mousemove",function(n){n.stopPropagation(),d&&(Y(d-n.clientY),d=n.clientY)}),t.bind("mouseout mouseup",function(n){n.stopPropagation(),d=null}),i.bind("mousedown",function(n){n.stopPropagation(),l=n.clientY}),e.bind("mousemove",function(n){n.stopPropagation();var o=-(l-n.clientY)*k();l&&(Y(o),l=n.clientY)}),e.bind("mouseout mouseup",function(n){n.stopPropagation(),l=null})},p=function(){var n=r.height(),o=t.height();v(n,o),g(n,o)},v=function(n,o){n>o?s.hide():s.show()},g=function(n,o){var e=n/o*c.height();i.css("height",e)},w=function(){r.css("-moz-user-select","none"),r.css("-webkit-user-select","none"),r.attr("onselectstart","return false;")},P=function(){r.css("-moz-user-select",""),r.css("-webkit-user-select",""),r.removeAttr("onselectstart")},Y=function(n){var o=t.css("top"),s=t.height(),i=e.height(),c="auto"===o?0:parseInt(o),r=c-n;a.css("top");r>0?r=0:-1*r>s-i&&(r=-(s-i)),r!==c&&(z(r),y(-r/k()))},k=function(){return t.height()/e.height()},z=function(n){t.css("top",n)},y=function(n){i.css("top",n)},A=function(){t.unbind("mousedown mousemove mouseout mouseup"),i.unbind("mousedown"),e.unbind("mousemove mouseout mouseup")};return o=o||{},u(),{init:u,refresh:p,pan:Y,reset:function(){z(0),y(0)},destroy:function(){A(),P(),r.html(r.find(".faded-scrollbar-container").html())}}};