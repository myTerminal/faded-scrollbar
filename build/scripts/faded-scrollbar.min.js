var FadedScrollbar=function(a,b){var c,d,e,f,g,h,i=$(a).first(),j=null,k=null,l="<div class='faded-scrollbar-parent'>  <div class='faded-scrollbar-container'>  </div>  <div class='faded-scrollbar-controls'>    <div class='faded-scrollbar-handle-container'>      <div class='faded-scrollbar-handle'>        <div class='faded-scrollbar-handle-bar'></div>      </div>      <div class='faded-scrollbar-handle-track'></div>    </div>  </div></div>",m=function(){n(),q(),r()},n=function(){u(),o(),p()},o=function(){var a=i.html();c=$(l),i.html(""),i.append(c),c.find(".faded-scrollbar-container").append(a)},p=function(){d=c.find(".faded-scrollbar-container"),e=c.find(".faded-scrollbar-controls"),f=c.find(".faded-scrollbar-handle"),g=c.find(".faded-scrollbar-handle-bar"),h=c.find(".faded-scrollbar-handle-track")},q=function(){d.bind("mousedown",function(a){a.stopPropagation(),j=a.clientY}),d.bind("mousemove",function(a){a.stopPropagation(),j&&(w(j-a.clientY),j=a.clientY)}),d.bind("mouseout mouseup",function(a){a.stopPropagation(),j=null}),f.bind("mousedown",function(a){a.stopPropagation(),k=a.clientY}),c.bind("mousemove",function(a){a.stopPropagation();var b=-(k-a.clientY),c=b*x();k&&(w(c),k=a.clientY)}),c.bind("mouseout mouseup",function(a){a.stopPropagation(),k=null})},r=function(){var a=i.height(),b=d.height();s(a,b),t(a,b)},s=function(a,b){a>b?e.hide():e.show()},t=function(a,b){var c=a/b,d=h.height(),e=c*d;f.css("height",e)},u=function(){i.css("-moz-user-select","none"),i.css("-webkit-user-select","none"),i.attr("onselectstart","return false;")},v=function(){i.css("-moz-user-select",""),i.css("-webkit-user-select",""),i.removeAttr("onselectstart")},w=function(a){var b=d.css("top"),e=d.height(),f=c.height(),h="auto"===b?0:parseInt(b),i=h-a;g.css("top");i>0?i=0:-1*i>e-f&&(i=-(e-f)),i!==h&&(y(i),z(-i/x()))},x=function(){var a=d.height(),b=c.height();return a/b},y=function(a){d.css("top",a)},z=function(a){f.css("top",a)},A=function(){y(0)},B=function(){d.unbind("mousedown mousemove mouseout mouseup"),f.unbind("mousedown"),c.unbind("mousemove mouseout mouseup")},C=function(){B(),v(),i.html(i.find(".faded-scrollbar-container").html())};return b=b||{},m(),{init:m,refresh:r,pan:w,reset:A,destroy:C}};